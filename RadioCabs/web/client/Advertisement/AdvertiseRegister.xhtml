<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <body>

        <ui:composition template="./../../Template/Client/ClientTemplate.xhtml">

            <ui:define name="content">
                <style type="text/css">
                    #Advertise {
                        background:url(/RadioCabs/Resource/Client/images/tail-item.gif);
                        box-shadow:inset 0 1px 3px #c5c2a9;
                        -moz-box-shadow: inset 0 1px 3px #c5c2a9;
                        -webkit-box-shadow: inset 0 1px 3px #c5c2a9;
                    }

                    #Advertise a {
                        color:#d53827;
                    }

                    #contact-form textarea {
                        height: 104px;
                        overflow: auto;
                        resize: none;
                    }

                    .errorMsg{
                        color: red;
                        font-size: 8pt;
                    }
                </style>
                <f:metadata>  
                    <f:event type="preRenderView" listener="#{controllerAdvertise.prepareCreate(evt)}"></f:event>  
                </f:metadata>  

                <section id="content"><div class="ic"></div>                    
                    <div class="border-horiz"></div>                    
                    <div class="container_12">
                        <article class="grid_8">                            
                            <div class="box-register">
                                <h3>Book an Advertisement</h3>
                                <h:form id="contact-form" enctype="multipart/form-data">
                                    <h:messages style="font-size: large" id="errInsert" styleClass="errorMsg" for="errInsert" />
                                    <h:message styleClass="errorMsg" for="ddlPaymentType" />
                                    <h:messages style="font-size: large; color: #0d93ff" id="sucInsert" for="sucInsert" />                                    
                                    <fieldset>
                                        <div class="coll-1">
                                            <div>
                                                <div class="form-txt">ID:</div>
                                                <label>
                                                    <h:inputText id="txtAdvertiseID" value="#{controllerAdvertise.selected.registrationId}" required="true" requiredMessage="*This field is required" validatorMessage="*Advertise's ID is not valid">                                                
                                                        <f:validateRegex pattern="^[a-zA-Z0-9]+$" />
                                                    </h:inputText>
                                                    <h:message styleClass="errorMsg" for="txtAdvertiseID" />
                                                </label>
                                                <div class="clear"></div>
                                            </div>
                                            <div>
                                                <div class="form-txt">Company Name: </div>
                                                <label>
                                                    <h:inputText id="txtName" value="#{controllerAdvertise.selected.name}" required="true" requiredMessage="*This field is required" validatorMessage="*Driver ID is not valid">                                                
                                                        <f:validateRegex pattern="^[a-zA-Z0-9 ]+$" />
                                                    </h:inputText>
                                                    <h:message styleClass="errorMsg" for="txtName" />
                                                </label>
                                                <div class="clear"></div>
                                            </div>
                                            <div>
                                                <div class="form-txt">Designation: </div>
                                                <label>
                                                    <h:inputText id="txtDesignation" value="#{controllerAdvertise.selected.designation}" required="true" requiredMessage="*This field is required" validatorMessage="*Name is not valid">                                                
                                                        <f:validateRegex pattern="^[a-zA-Z ']+$" />
                                                    </h:inputText>
                                                    <h:message styleClass="errorMsg" for="txtDesignation" />
                                                </label>
                                                <div class="clear"></div>
                                            </div>
                                            <div>
                                                <div class="form-txt">Address: </div>
                                                <label>
                                                    <h:inputText id="txtAddress" value="#{controllerAdvertise.selected.address}" required="true" requiredMessage="*This field is required">                                                                                                    
                                                    </h:inputText>
                                                    <h:message styleClass="errorMsg" for="txtAddress" />
                                                </label>
                                                <div class="clear"></div>
                                            </div>
                                            <div>
                                                <div class="form-txt">Mobile: </div>
                                                <label>
                                                    <h:inputText id="txtMobile" value="#{controllerAdvertise.selected.mobile}" required="true" requiredMessage="*This field is required" validatorMessage="*Mobile is not valid">
                                                        <f:validateRegex pattern="^0[0-9.]{9,15}$" />
                                                    </h:inputText>
                                                    <h:message styleClass="errorMsg" for="txtMobile"/>
                                                </label>
                                            </div>                                                                                        
                                        </div>

                                        <div class="coll-2">
                                            <div>
                                                <div class="form-txt">Telephone: </div>
                                                <label>
                                                    <h:inputText id="txtTelephone" value="#{controllerAdvertise.selected.telephone}" required="true" requiredMessage="*This field is required" validatorMessage="*Telephone is not valid">
                                                        <f:validateRegex pattern="^[0-9.]*" />
                                                    </h:inputText>
                                                    <h:message styleClass="errorMsg" for="txtTelephone"/>
                                                </label>
                                                <div class="clear"></div>
                                            </div>
                                            <div>
                                                <div class="form-txt">Fax Number: </div>
                                                <label>
                                                    <h:inputText id="txtFax" value="#{controllerAdvertise.selected.faxNumber}" required="true" requiredMessage="*This field is required" validatorMessage="*Fax Number is not valid">
                                                        <f:validateRegex pattern="^[0-9.]*" />
                                                    </h:inputText>
                                                    <h:message styleClass="errorMsg" for="txtFax"/>
                                                </label>
                                                <div class="clear"></div>
                                            </div>
                                            <div>
                                                <div class="form-txt">Email:</div>
                                                <label>
                                                    <h:inputText id="txtEmail" value="#{controllerAdvertise.selected.email}" style="text-transform: none" required="true" requiredMessage="*This field is required" validatorMessage="*Email is not valid">
                                                        <f:validateRegex pattern="^(([\w-\s]+)|([\w-]+(?:\.[\w-]+)*)|([\w-\s]+)([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i" />
                                                    </h:inputText>
                                                    <h:message styleClass="errorMsg" for="txtEmail"/>
                                                </label>
                                                <div class="clear"></div>
                                            </div>

                                            <div>
                                                <div class="form-txt">Description:</div>
                                                <label>
                                                    <h:inputTextarea id="txtDescription" value="#{controllerAdvertise.selected.description}" style="height: 85px;">                                                    
                                                    </h:inputTextarea>
                                                    <h:message styleClass="errorMsg" for="txtDescription"/>
                                                </label>
                                                <div class="clear"></div>
                                            </div>
                                        </div>

                                        <div class="clear"></div>

                                        <div class="btns">                                    
                                            <h:commandLink id="btnReset" styleClass="btn" value="Reset">
                                                <p:ajax update=":contact-form" resetValues="true" />
                                            </h:commandLink>       
                                            <p:commandLink id="btnRegister" styleClass="btn" oncomplete="wgPayAndUploadImg.show()"
                                                           value="Register" data-type="submit"/>
                                        </div>
                                    </fieldset>

                                    <p:dialog widgetVar="wgPayAndUploadImg" resizable="false"  header="Finish book advertise">
                                        <p:outputPanel style="padding: 20px;">
                                            <div style="float: left; margin-right: 20px;">
                                                <h4>Select payment type</h4>
                                                <hr/>
                                                <table id="tblPay" style="margin: auto;">
                                                    <tr style="height: 50px;">
                                                        <td style="width: 120px;">
                                                            <h:outputLabel for="ddlPaymentType" value="Payment type: "/>
                                                        </td>
                                                        <td>
                                                            <p:selectOneMenu id="ddlPaymentType" value="#{controllerBilling.selected.paymentType}" style="width: 150px;" required="true" requiredMessage="*Please select payment type" >
                                                                <f:selectItem itemLabel="---Select---" itemValue=""  noSelectionOption="true"/>
                                                                <f:selectItems value="#{controllerBilling.listPaymentType}" var="paymentType" itemLabel="#{paymentType.paymentTypeName}" itemValue="#{paymentType}"/>
                                                                <f:converter converterId="paymentTypeConverter" />                            
                                                                <p:ajax process="@this" event="change" update=":contact-form:txtMoney" listener="#{controllerBilling.updateMoneyForAdvertise()}"/>
                                                                <f:validateRequired for="ddlPaymentType"  />
                                                            </p:selectOneMenu>
                                                        </td>
                                                    </tr>
                                                    <tr style="height: 50px;">
                                                        <td><h:outputLabel for="txtMoney" value="Balance"/></td>
                                                        <td><h:outputText id="txtMoney" value="#{controllerBilling.displayMoney}"/> USD</td>
                                                    </tr>                                                
                                                </table>
                                            </div>
                                            <div style="float:right; margin-left: 20px;">
                                                <h4>Upload your image</h4>
                                                <hr/>
                                                <table style="margin: auto; margin-top: 20px;">
                                                    <tr>
                                                        <td></td>
                                                        <td><p:fileUpload mode="simple" value="#{controllerUploadFile.uploadFile}" /></td>
                                                    </tr>
                                                </table>
                                                <div style="float: right">
                                                    <p:commandButton style="margin-top: 10px;" value="Register" ajax="false">
                                                        <f:actionListener binding="#{controllerAdvertise.register(evt)}"/>                                                        
                                                    </p:commandButton>
                                                </div>
                                            </div>
                                        </p:outputPanel>
                                    </p:dialog>
                                </h:form>
                            </div>
                        </article>
                        <div class="clear"></div>
                    </div>
                </section>
            </ui:define>

        </ui:composition>

    </body>
</html>
